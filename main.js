(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var t=function(){function t(e,n,o,r,i,a,c){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._id=e._id,this._ownerId=e.owner._id,this._usersLikes=e.likes,this._userId=i,this._templateSelector=n,this._handleCardClick=o,this._handleOpenPopup=r,this._handleAddLike=a,this._handleDeleteLike=c}var n,o;return n=t,o=[{key:"_getTemplate",value:function(){return console.log(this._templateSelector),document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._cardImage=this._element.querySelector(".element__photo"),this._cardLike=this._element.querySelector(".element__like"),this._cardBasket=this._element.querySelector(".element__basket"),this._setEventListeners(),this._removeCardBasket(),this._checkLike(),this._element.querySelector(".element__title").textContent=this._name,this._element.querySelector(".element__like__counter").textContent=this._handleAddLike,this._cardImage.src=this._link,this._cardImage.alt=this._name,this._element}},{key:"_setEventListeners",value:function(){var e=this;this._cardLike.addEventListener("click",(function(){console.log(e),console.log(e._element),e._cardLike.classList.contains("element__like_active")?e._handleDeleteLike(e):e._handleAddLike(e)})),this._cardBasket.addEventListener("click",(function(){e._handleOpenPopup(e)})),this._cardImage.addEventListener("click",(function(){e._handleCardClick(e._name,e._link)}))}},{key:"_removeCardBasket",value:function(){this._ownerId!==this._userId&&this._cardBasket.remove()}},{key:"_checkLike",value:function(){var e=this;this._usersLikes.forEach((function(t){t._id===e._userId&&e._cardLike.classList.add("element__like_active")}))}},{key:"getView",value:function(){return this._element}},{key:"deleteCard",value:function(){this._element.remove()}}],o&&e(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const r=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"_showInputError",(function(e){var t=r._form.querySelector("#".concat(e.id,"-error"));t.textContent=e.validationMessage,t.classList.add(r._errorClass),e.classList.add(r._inputErrorClass)})),o(this,"_hideInputError",(function(e){var t=r._form.querySelector("#".concat(e.id,"-error"));t.textContent=" ",t.classList.remove(r._errorClass),e.classList.remove(r._inputErrorClass)})),o(this,"_hasInvalidInput",(function(e){return Array.from(e).some((function(e){return!e.validity.valid}))})),o(this,"_toggleButtonError",(function(e){r._hasInvalidInput(r._inputs)?r.disableSubmitButton():r.enableSubmitButton()})),o(this,"_setInputListeners",(function(){r._inputs=r._form.querySelectorAll(r._inputSelector),r._submitButton=r._form.querySelector(r._submitButtonSelector),r._inputs.forEach((function(e){e.addEventListener("input",(function(){r._checkIfInputValid(e),r._toggleButtonError(r._submitButton)}))}))})),o(this,"enableValidation",(function(){r._form.addEventListener("submit",(function(e){e.preventDefault()})),r._setInputListeners()})),this._form=n,this._formSelector=t.formSelector,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass}var t,r;return t=e,(r=[{key:"resetValidation",value:function(){var e=this;this._toggleButtonError(this._submitButton),this._inputs.forEach((function(t){e._hideInputError(t)}))}},{key:"disableSubmitButton",value:function(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}},{key:"enableSubmitButton",value:function(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}},{key:"_checkIfInputValid",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var a=function(){function e(t,n){var o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=o,this._container=n}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.append(e)}},{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(e){var t=this;this.clear(),e.forEach((function(e){t._renderer(e)}))}},{key:"prependItem",value:function(e){this._container.prepend(e)}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this),this.close=this.close.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){(t.target.classList.contains("popup__overlay")||t.target.classList.contains("close-button"))&&e.close()}))}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=p(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},f.apply(this,arguments)}function p(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function _(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(a,e);var t,n,o,r,i=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(o);if(r){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._image=t._popup.querySelector(".popup-picture__image"),t._description=t._popup.querySelector(".popup-picture__description"),t}return t=a,(n=[{key:"open",value:function(e,t){this._image.src=t,this._image.alt=e,this._description.textContent=e,f(h(a.prototype),"open",this).call(this)}}])&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(u);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=k(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},b.apply(this,arguments)}function k(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function S(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(a,e);var t,n,o,r,i=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(o);if(r){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._handleFormSubmit=t,n._submitButtonSelector=n._popup.querySelector(".submit-button"),n._inputList=Array.from(n._popup.querySelectorAll(".popup__input")),n._form=n._popup.querySelector(".popup__form"),n}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;b(w(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues())}))}},{key:"close",value:function(){b(w(a.prototype),"close",this).call(this),this._form.reset()}},{key:"renderLoading",value:function(e){this._submitButtonSelector.textContent=e?"Сохранение...":this._submitButtonSelector.textContent}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(u);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function j(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=C(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},O.apply(this,arguments)}function C(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}function P(e,t){return P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},P(e,t)}function I(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(a,e);var t,n,o,r,i=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=q(o);if(r){var n=q(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return I(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._handleFormSubmit=t,n._submitButtonSelector=n._popup.querySelector(".submit-button"),n._form=n._popup.querySelector(".popup__form"),n}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;O(q(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._card)}))}},{key:"getReadyToDelete",value:function(e){this._card=e}}])&&j(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(u);function T(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var R=function(){function e(t){var n=t.name,o=t.about,r=t.avatar,i=t._id;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=n,this._about=o,this._avatar=r,this._id=i}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this._dataObject={name:this._name,about:this._about,avatar:this._avatar,id:this._id},this._dataObject}},{key:"setUserInfo",value:function(e){this._name=e.name,this._about=e.about,this._id=e._id}},{key:"setUserAvatar",value:function(e){this._avatar=e.avatar}},{key:"getId",value:function(){return this._id}}])&&T(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),x=document.querySelector(".edit-button"),D=document.querySelector(".add-button"),A=document.querySelector(".form-edit"),U=document.querySelector(".form-add"),V=document.querySelector(".form-avatar"),z=document.querySelector(".field_type_name"),F=document.querySelector(".field_type_description"),N=document.querySelector(".popup-avatar__input"),H=document.querySelector(".profile__avatar"),J=document.querySelector(".profile__avatar__overlay"),M={name:document.querySelector(".profile__title").textContent,about:document.querySelector(".profile__subtitle").textContent,avatar:document.querySelector(".profile__avatar").src},G=document.querySelector(".elements"),K={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};function Q(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var W=function(){function e(t){var n=t.address,o=t.token;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._address=n,this._token=o}var t,n;return t=e,(n=[{key:"getCards",value:function(){return fetch("".concat(this._address,"/cards"),{headers:{authorization:this._token}}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка ".concat(e.status))}))}},{key:"sendCard",value:function(e){return fetch("".concat(this._address,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e.name,link:e.link})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка ".concat(e.status))}))}},{key:"getProfileInfo",value:function(){return fetch("".concat(this._address,"//users/me"),{headers:{authorization:this._token}}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка ".concat(e.status))}))}},{key:"sendProfileInfo",value:function(e){return fetch("".concat(this._address,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка ".concat(e.status))}))}},{key:"sendAvatar",value:function(e){return fetch("".concat(this._address,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:e.avatar})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка ".concat(e.status))}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this._address,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._token,"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка ".concat(e.status))}))}},{key:"addLike",value:function(e){return fetch("".concat(this._address,"/cards/").concat(e,"/likes"),{method:"PUT",headers:{authorization:this._token,"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка ".concat(e.status))}))}},{key:"deleteLike",value:function(e){return fetch("".concat(this._address,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:{authorization:this._token,"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка ".concat(e.status))}))}}])&&Q(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),X=new r(K,A),Y=new r(K,U),Z=new r(K,V);X.enableValidation(),Y.enableValidation(),Z.enableValidation();var $=new y(".popup-picture");$.setEventListeners();var ee=new E(".popup-edit",(function(e){ee.renderLoading(!0),ie.setUserInfo(e),ae.sendProfileInfo(ie.getUserInfo()).then((function(){ee.close()})).catch((function(e){console.log("Ошибка при редактировании профиля".concat(e))})).finally((function(){X.disableSubmitButton(),ee.renderLoading(!1)}))}));ee.setEventListeners();var te=new E(".popup-add",(function(e){te.renderLoading(!0),ae.sendCard(e).then((function(e){var t=pe(e);se.prependItem(t),te.close(),console.log(ie.getId())})).catch((function(e){console.log("Ошибка при добавлении карточки".concat(e))})).finally((function(){te.renderLoading(!1)}))}));te.setEventListeners();var ne=new B(".popup-delete",(function(e){var t=e._id;ae.deleteCard(t).then((function(){e.deleteCard(),ne.close()})).catch((function(e){console.log("Ошибка при удалении карточки".concat(e))}))}));ne.setEventListeners();var oe=new E(".popup-avatar",(function(e){oe.renderLoading(!0),ie.setUserAvatar(e),ae.sendAvatar(e).then((function(){oe.close()})).catch((function(e){console.log("Ошибка при редактировании профиля".concat(e))})).finally((function(){oe.renderLoading(!1)}))}));oe.setEventListeners();var re,ie=new R(M);console.log(ie);var ae=new W({address:"https://mesto.nomoreparties.co/v1/cohort-35",token:"b6ff83c2-3ced-4557-872e-eefa9152b997"}),ce=ae.getProfileInfo(),ue=ae.getCards(),se=new a({renderer:function(e){var t=pe(e,e.likes.length);se.addItem(t)}},G);function le(e,t){$.open(e,t)}function fe(e){ne.open(),ne.getReadyToDelete(e)}function pe(e){return new t(e,".element-template",le,fe,re.getId(),de,_e).generateCard()}function de(e){var t=e._id;ae.addLike(t).then((function(t){e._element.querySelector(".element__like__counter").textContent=t.likes.length,e._element.querySelector(".element__like").classList.add("element__like_active")})).catch((function(e){console.log("Ошибка при лайке карточки".concat(e))}))}function _e(e){var t=e._id;ae.deleteLike(t).then((function(t){e._element.querySelector(".element__like__counter").textContent=t.likes.length,e._element.querySelector(".element__like").classList.remove("element__like_active")})).catch((function(e){console.log("Ошибка при удалении лайка карточки".concat(e))}))}Promise.all([ce,ue]).then((function(e){ie.setUserInfo(e[0]),ie.setUserAvatar(e[0]),se.renderItems(e[1])})).catch((function(e){return console.log("Ошибка.....: ".concat(e))})),ae.getCards().then((function(e){se.renderItems(e)})).catch((function(e){console.log((function(e){console.log(e)}))})),ae.getProfileInfo().then((function(e){console.log("User id:",e._id);var t=(re=new R(e)).getUserInfo();document.querySelector(".profile__title").textContent=t.name,document.querySelector(".profile__avatar").alt=t.name,document.querySelector(".profile__avatar").src=t.avatar,document.querySelector(".profile__subtitle").textContent=t.about})).catch((function(e){console.log((function(e){console.log(e)}))})),D.addEventListener("click",(function(){te.open(),Y.disableSubmitButton()})),x.addEventListener("click",(function(){var e;e=ie.getUserInfo(),console.log(e),console.log(z),console.log(F),z.value=e.name,F.value=e.about,ee.open()})),H.addEventListener("mouseenter",(function(){J.classList.remove("profile__avatar__overlay_closed")})),H.addEventListener("mouseleave",(function(){J.classList.add("profile__avatar__overlay_closed")})),J.addEventListener("click",(function(){var e;e=ie.getUserInfo(),N.value=e.avatar,oe.open(),J.classList.add("profile__avatar__overlay_closed")}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxNQUFLLFNBQUN4SixHQUNMdUIsUUFBUUMsSUFBSSxXQUFZeEIsRUFBS1ksS0FFN0IsSUFBTWtNLEdBRE5oQixHQUFVLElBQUlqRSxFQUFTN0gsSUFDRStLLGNBQ3pCdEosU0FBU0MsY0FBYyxtQkFBbUJXLFlBQWN5SyxFQUFTck0sS0FDakVnQixTQUFTQyxjQUFjLG9CQUFvQmEsSUFBTXVLLEVBQVNyTSxLQUMxRGdCLFNBQVNDLGNBQWMsb0JBQW9CWSxJQUFNd0ssRUFBUy9FLE9BQzFEdEcsU0FBU0MsY0FBYyxzQkFBc0JXLFlBQWN5SyxFQUFTaEYsU0FFckVrRCxPQUFNLFNBQUFDLEdBQ0wxSixRQUFRQyxLQUFJLFNBQUF5SixHQUNWMUosUUFBUUMsSUFBSXlKLFNBcURsQjdDLEVBQVU1RixpQkFBaUIsU0FBUyxXQS9IbEMySSxHQUFTa0IsT0FDVGhDLEVBQWtCbkcseUJBaUlwQmlFLEVBQVczRixpQkFBaUIsU0FBUyxXQXBEckMsSUFDUXNLLEVBQUFBLEVBQVdqSyxHQUFLa0ksY0FDdEJ4SixRQUFRQyxJQUFJc0wsR0FDWnZMLFFBQVFDLElBQUlnSCxHQUNaakgsUUFBUUMsSUFBSWlILEdBQ1pELEVBQVVqQixNQUFRdUYsRUFBU3JNLEtBQzNCZ0ksRUFBU2xCLE1BQVF1RixFQUFTaEYsTUFDMUI0QyxHQUFVMkIsVUFnRFoxRCxFQUFjbkcsaUJBQWlCLGNBQWMsV0FDM0NvRyxFQUFlbkcsVUFBVUUsT0FBTyxzQ0FHbENnRyxFQUFjbkcsaUJBQWlCLGNBQWMsV0FDM0NvRyxFQUFlbkcsVUFBVUssSUFBSSxzQ0FHL0I4RixFQUFlcEcsaUJBQWlCLFNBQVMsV0F0QnpDLElBQ1FzSyxFQUFBQSxFQUFXakssR0FBS2tJLGNBQ3RCckMsRUFBVW5CLE1BQVF1RixFQUFTL0UsT0FDM0I0RCxHQUFZVSxPQUNaekQsRUFBZW5HLFVBQVVLLElBQUksdUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly95YW5kZXgubWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3lhbmRleC5tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8veWFuZGV4Lm1lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly95YW5kZXgubWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly95YW5kZXgubWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly95YW5kZXgubWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3lhbmRleC5tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanMiLCJ3ZWJwYWNrOi8veWFuZGV4Lm1lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8veWFuZGV4Lm1lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly95YW5kZXgubWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8veWFuZGV4Lm1lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIHRlbXBsYXRlU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlT3BlblBvcHVwLCB1c2VySWQsIGhhbmRsZUFkZExpa2UsIGhhbmRsZURlbGV0ZUxpa2UpIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZDtcclxuICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcclxuICAgIHRoaXMuX3VzZXJzTGlrZXMgPSBkYXRhLmxpa2VzO1xyXG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xyXG4gICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVPcGVuUG9wdXAgPSBoYW5kbGVPcGVuUG9wdXA7XHJcbiAgICAvLyB0aGlzLl9saWtlTnVtYmVyID0gbGlrZU51bWJlcjtcclxuICAgIHRoaXMuX2hhbmRsZUFkZExpa2UgPSBoYW5kbGVBZGRMaWtlO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlTGlrZSA9IGhhbmRsZURlbGV0ZUxpa2U7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKTtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50JylcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3Bob3RvJyk7XHJcbiAgICB0aGlzLl9jYXJkTGlrZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UnKTtcclxuICAgIHRoaXMuX2NhcmRCYXNrZXQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19iYXNrZXQnKTtcclxuICAgIFxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3JlbW92ZUNhcmRCYXNrZXQoKTtcclxuICAgIHRoaXMuX2NoZWNrTGlrZSgpO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RpdGxlJykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZV9fY291bnRlcicpLnRleHRDb250ZW50ID0gdGhpcy5faGFuZGxlQWRkTGlrZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9jYXJkTGlrZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgLy8gdGhpcy5faGFuZGxlTGlrZSgpO1xyXG4gICAgICBjb25zb2xlLmxvZyh0aGlzKTtcclxuICAgICAgY29uc29sZS5sb2codGhpcy5fZWxlbWVudCk7XHJcbiAgICAgIGlmICh0aGlzLl9jYXJkTGlrZS5jbGFzc0xpc3QuY29udGFpbnMoJ2VsZW1lbnRfX2xpa2VfYWN0aXZlJykpIHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVMaWtlKHRoaXMpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2V7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQWRkTGlrZSh0aGlzKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEJhc2tldC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlT3BlblBvcHVwKHRoaXMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluayk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIF9oYW5kbGVMaWtlKCkge1xyXG4gIC8vICAgdGhpcy5fY2FyZExpa2UuY2xhc3NMaXN0LnRvZ2dsZSgnZWxlbWVudF9fbGlrZV9hY3RpdmUnKTtcclxuICAvLyB9XHJcblxyXG4gIF9yZW1vdmVDYXJkQmFza2V0KCkge1xyXG4gICAgaWYodGhpcy5fb3duZXJJZCAhPT0gdGhpcy5fdXNlcklkKSB7XHJcbiAgICAgIHRoaXMuX2NhcmRCYXNrZXQucmVtb3ZlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfY2hlY2tMaWtlKCkge1xyXG4gICAgdGhpcy5fdXNlcnNMaWtlcy5mb3JFYWNoKCh1c2VyKSA9PiB7XHJcbiAgICAgIGlmKHVzZXIuX2lkID09PSB0aGlzLl91c2VySWQpIHtcclxuICAgICAgICB0aGlzLl9jYXJkTGlrZS5jbGFzc0xpc3QuYWRkKCdlbGVtZW50X19saWtlX2FjdGl2ZScpO1xyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gIH1cclxufVxyXG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBmb3JtKSB7XHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybTtcclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGRhdGEuZm9ybVNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGRhdGEuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gZGF0YS5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBkYXRhLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBkYXRhLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBkYXRhLmVycm9yQ2xhc3M7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25FcnJvcih0aGlzLl9zdWJtaXRCdXR0b24pO1xyXG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBkaXNhYmxlU3VibWl0QnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlU3VibWl0QnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvciA9IChpbnB1dCkgPT4ge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuICAgIGVycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JNZXNzYWdlLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IgPSAoaW5wdXQpID0+IHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XHJcbiAgICBlcnJvck1lc3NhZ2UudGV4dENvbnRlbnQgPSAnICc7XHJcbiAgICBlcnJvck1lc3NhZ2UuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRzKSA9PiB7XHJcbiAgICByZXR1cm4gQXJyYXkuZnJvbShpbnB1dHMpLnNvbWUoKGVsZW1lbnQpID0+ICFlbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25FcnJvciA9IChidXR0b24pID0+IHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRzKSkge1xyXG4gICAgICB0aGlzLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZW5hYmxlU3VibWl0QnV0dG9uKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJZklucHV0VmFsaWQoaW5wdXQpIHtcclxuICAgIGlmIChpbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldElucHV0TGlzdGVuZXJzID0gKCkgPT4ge1xyXG4gICAgdGhpcy5faW5wdXRzID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJZklucHV0VmFsaWQoaW5wdXQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvbkVycm9yKHRoaXMuX3N1Ym1pdEJ1dHRvbik7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbiA9ICgpID0+IHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldElucHV0TGlzdGVuZXJzKCk7XHJcbiAgfTtcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XHJcblxyXG5cclxuXHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHtyZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyU2VsZWN0b3I7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICBjbGVhcigpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XHJcbiAgICB0aGlzLmNsZWFyKCk7XHJcblxyXG4gICAgaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHByZXBlbmRJdGVtKGNhcmQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGNhcmQpO1xyXG4gIH1cclxuXHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpOyAvL9C/0YDQuNCy0Y/Qt9GL0LLQsNGOINC6INC60L7QvdC60YDQtdGC0L3QvtC80YMg0L/QvtC/0LDQv9GDXHJcbiAgICB0aGlzLmNsb3NlID0gdGhpcy5jbG9zZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX292ZXJsYXknKSB8fCBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY2xvc2UtYnV0dG9uJykpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtcGljdHVyZV9faW1hZ2UnKTtcclxuICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwLXBpY3R1cmVfX2Rlc2NyaXB0aW9uJyk7XHJcbiAgfVxyXG4gIG9wZW4obmFtZSwgbGluaykge1xyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHRoaXMuX2ltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9kZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5zdWJtaXQtYnV0dG9uJyk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKSk7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XHJcbiAgfVxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcclxuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpIHtcclxuICAgIGlmKGlzTG9hZGluZykge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvci50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IudGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvci50ZXh0Q29udGVudDtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnN1Ym1pdC1idXR0b24nKTtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9jYXJkKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0UmVhZHlUb0RlbGV0ZShjYXJkKSB7XHJcbiAgICB0aGlzLl9jYXJkID0gY2FyZDtcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3Ioe25hbWUsIGFib3V0LCBhdmF0YXIsIF9pZH0pIHtcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fYWJvdXQgPSBhYm91dDtcclxuICAgIHRoaXMuX2F2YXRhciA9IGF2YXRhcjtcclxuICAgIHRoaXMuX2lkID0gX2lkO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICB0aGlzLl9kYXRhT2JqZWN0ID0ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLFxyXG4gICAgICBhYm91dDogdGhpcy5fYWJvdXQsXHJcbiAgICAgIGF2YXRhcjogdGhpcy5fYXZhdGFyLFxyXG4gICAgICBpZDogdGhpcy5faWRcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLl9kYXRhT2JqZWN0O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oZGF0YSkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2Fib3V0ID0gZGF0YS5hYm91dDtcclxuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VyQXZhdGFyKGRhdGEpIHtcclxuICAgIHRoaXMuX2F2YXRhciA9IGRhdGEuYXZhdGFyO1xyXG4gIH1cclxuXHJcbiAgZ2V0SWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faWQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXQtYnV0dG9uJyk7XHJcbmV4cG9ydCBjb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLWJ1dHRvbicpO1xyXG5leHBvcnQgY29uc3QgZm9ybUVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybS1lZGl0Jyk7XHJcbmV4cG9ydCBjb25zdCBmb3JtQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm0tYWRkJyk7XHJcbmV4cG9ydCBjb25zdCBmb3JtQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm0tYXZhdGFyJyk7XHJcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmllbGRfdHlwZV9uYW1lJyk7XHJcbmV4cG9ydCBjb25zdCBqb2JJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5maWVsZF90eXBlX2Rlc2NyaXB0aW9uJyk7XHJcbmV4cG9ydCBjb25zdCBsaW5rSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtYXZhdGFyX19pbnB1dCcpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXInKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVPdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhcl9fb3ZlcmxheScpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHVzZXJEZXNjcmlwdGlvbiA9IHtcclxuICBuYW1lOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fdGl0bGUnKS50ZXh0Q29udGVudCxcclxuICBhYm91dDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3N1YnRpdGxlJykudGV4dENvbnRlbnQsXHJcbiAgYXZhdGFyOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyJykuc3JjLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGVsZW1lbnRzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzJyk7XHJcblxyXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxyXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fYnV0dG9uJyxcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX2J1dHRvbl9kaXNhYmxlZCcsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLFxyXG4gIGVycm9yQ2xhc3M6ICdwb3B1cF9fZXJyb3JfdmlzaWJsZSdcclxufTsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yICh7YWRkcmVzcywgdG9rZW59KSB7XHJcbiAgICB0aGlzLl9hZGRyZXNzID0gYWRkcmVzcztcclxuICAgIHRoaXMuX3Rva2VuID0gdG9rZW47XHJcbiAgfVxyXG5cclxuICBnZXRDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaCAoYCR7dGhpcy5fYWRkcmVzc30vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlblxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LAgJHtyZXMuc3RhdHVzfWApXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgc2VuZENhcmQoZGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoIChgJHt0aGlzLl9hZGRyZXNzfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgbGluazogZGF0YS5saW5rXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LAgJHtyZXMuc3RhdHVzfWApXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgZ2V0UHJvZmlsZUluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2ggKGAke3RoaXMuX2FkZHJlc3N9Ly91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKClcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsCAke3Jlcy5zdGF0dXN9YClcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBzZW5kUHJvZmlsZUluZm8oZGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoIChgJHt0aGlzLl9hZGRyZXNzfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICAgIGFib3V0OiBkYXRhLmFib3V0LFxyXG4gICAgICAgIC8vIGF2YXRhcjogZGF0YS5hdmF0YXJcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKClcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsCAke3Jlcy5zdGF0dXN9YClcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBzZW5kQXZhdGFyKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaCAoYCR7dGhpcy5fYWRkcmVzc30vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGRhdGEuYXZhdGFyXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LAgJHtyZXMuc3RhdHVzfWApXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaCAoYCR7dGhpcy5fYWRkcmVzc30vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fdG9rZW4sXHJcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICB9LFxyXG4gICAgfSlcclxuICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwICR7cmVzLnN0YXR1c31gKVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGFkZExpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2ggKGAke3RoaXMuX2FkZHJlc3N9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX3Rva2VuLFxyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgfSxcclxuICAgIH0pXHJcbiAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKClcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsCAke3Jlcy5zdGF0dXN9YClcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBkZWxldGVMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoIChgJHt0aGlzLl9hZGRyZXNzfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl90b2tlbixcclxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgIH0sXHJcbiAgICB9KVxyXG4gICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LAgJHtyZXMuc3RhdHVzfWApXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbn0iLCJpbXBvcnQgJy4vaW5kZXguY3NzJztcclxuaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanMnO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XHJcbmltcG9ydCB7XHJcbiAgZWRpdEJ1dHRvbixcclxuICBhZGRCdXR0b24sXHJcbiAgZm9ybUVkaXQsXHJcbiAgZm9ybUFkZCxcclxuICBmb3JtQXZhdGFyLFxyXG4gIG5hbWVJbnB1dCxcclxuICBqb2JJbnB1dCxcclxuICBsaW5rSW5wdXQsXHJcbiAgdXNlckRlc2NyaXB0aW9uLFxyXG4gIGVsZW1lbnRzQ29udGFpbmVyLFxyXG4gIHByb2ZpbGVBdmF0YXIsXHJcbiAgcHJvZmlsZU92ZXJsYXksXHJcbiAgdmFsaWRhdGlvbkNvbmZpZ1xyXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XHJcbmltcG9ydCBBcGkgZnJvbSAnLi4vY29tcG9uZW50cy9BcGkuanMnO1xyXG5cclxuLy8g0LLQsNC70LjQtNCw0YbQuNGPINGE0L7RgNC8XHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybUVkaXQpO1xyXG5jb25zdCBjYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIGZvcm1BZGQpO1xyXG5jb25zdCBhdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgZm9ybUF2YXRhcik7XHJcblxyXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmNhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYXZhdGFyRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vL9GB0L7Qt9C00LDQvdC40LUg0L/QvtC/0LDQv9CwLdC60LDRgNGC0LjQvdC60LhcclxuY29uc3QgcG9wdXBQaWN0dXJlID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXAtcGljdHVyZScpO1xyXG5wb3B1cFBpY3R1cmUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vINC/0L7Qv9Cw0L8g0KDQldCU0JDQmtCi0JjQoNCe0JLQkNCd0JjQlVxyXG5jb25zdCBwb3B1cEVkaXQgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwLWVkaXQnLCBzdWJtaXRQb3B1cEVkaXQpO1xyXG5wb3B1cEVkaXQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8v0L/QvtC/0LDQvyDQlNCe0JHQkNCS0JvQldCd0JjQlVxyXG5jb25zdCBwb3B1cEFkZCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXAtYWRkJywgc3VibWl0UG9wdXBBZGQpO1xyXG5wb3B1cEFkZC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8g0L/QvtC/0LDQvyDQo9CU0JDQm9CV0J3QmNCVIFxyXG5jb25zdCBwb3B1cERlbGV0ZSA9IG5ldyBQb3B1cFdpdGhDb25maXJtKCcucG9wdXAtZGVsZXRlJywgc3VibWl0UG9wdXBEZWxldGUpXHJcbnBvcHVwRGVsZXRlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyDQv9C+0L/QsNC/INCQ0JLQkNCi0JDQoCBcclxuY29uc3QgcG9wdXBBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwLWF2YXRhcicsIHN1Ym1pdFBvcHVwQXZhdGFyKVxyXG5wb3B1cEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8gY29uc29sZS5sb2codXNlckRlc2NyaXB0aW9uLmlkKTtcclxuY29uc3QgdXNlciA9IG5ldyBVc2VySW5mbyh1c2VyRGVzY3JpcHRpb24pO1xyXG5jb25zb2xlLmxvZyh1c2VyKTtcclxuXHJcbmxldCB1c2VyTmV3O1xyXG5cclxuLy8gQVBJXHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBhZGRyZXNzOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC0zNScsXHJcbiAgdG9rZW46ICdiNmZmODNjMi0zY2VkLTQ1NTctODcyZS1lZWZhOTE1MmI5OTcnXHJcbn0pO1xyXG5cclxuY29uc3QgcHJvbWlzZVByb2ZpbGVJbmZvID0gYXBpLmdldFByb2ZpbGVJbmZvKCk7XHJcbmNvbnN0IHByb21pc2VDYXJkcyA9IGFwaS5nZXRDYXJkcygpO1xyXG5cclxuLy8g0LrQsNGA0YLQvtGH0LrQuFxyXG5jb25zdCBjYXJkQ29udGFpbmVyID0gbmV3IFNlY3Rpb24oe1xyXG4gIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoaXRlbSwgaXRlbS5saWtlcy5sZW5ndGgpO1xyXG4gICAgY2FyZENvbnRhaW5lci5hZGRJdGVtKGNhcmQpO1xyXG4gIH0sXHJcbn0sIGVsZW1lbnRzQ29udGFpbmVyKTtcclxuXHJcblxyXG5Qcm9taXNlLmFsbChbcHJvbWlzZVByb2ZpbGVJbmZvLCBwcm9taXNlQ2FyZHNdKVxyXG4udGhlbih2YWx1ZXMgPT4ge1xyXG4gIHVzZXIuc2V0VXNlckluZm8odmFsdWVzWzBdKTtcclxuICB1c2VyLnNldFVzZXJBdmF0YXIodmFsdWVzWzBdKTtcclxuICBjYXJkQ29udGFpbmVyLnJlbmRlckl0ZW1zKHZhbHVlc1sxXSk7XHJcbn0pXHJcbi5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsC4uLi4uOiAke2Vycn1gKSk7XHJcblxyXG4vLyDQv9C+0LvRg9GH0LXQvdC40LUg0LrQsNGA0YLQvtGH0LXQulxyXG5hcGkuZ2V0Q2FyZHMoKVxyXG4gIC50aGVuKChjYXJkcykgPT4ge1xyXG4gICAgY2FyZENvbnRhaW5lci5yZW5kZXJJdGVtcyhjYXJkcyk7XHJcbiAgfSlcclxuICAuY2F0Y2goZXJyID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDYXJkQ2xpY2sobmFtZSwgbGluaykge1xyXG4gIHBvcHVwUGljdHVyZS5vcGVuKG5hbWUsIGxpbmspO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVPcGVuUG9wdXAoY2FyZCkge1xyXG4gIHBvcHVwRGVsZXRlLm9wZW4oKTtcclxuICBwb3B1cERlbGV0ZS5nZXRSZWFkeVRvRGVsZXRlKGNhcmQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGRhdGEpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoZGF0YSwgJy5lbGVtZW50LXRlbXBsYXRlJywgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVPcGVuUG9wdXAsIHVzZXJOZXcuZ2V0SWQoKSwgaGFuZGxlQWRkTGlrZSwgaGFuZGxlRGVsZXRlTGlrZSk7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG4gIHJldHVybiBjYXJkRWxlbWVudDtcclxufVxyXG4vLyDQtNC+0LHQsNCy0LvQtdC90LjQtSDQutCw0YDRgtC+0YfQtdC6XHJcbmZ1bmN0aW9uIG9wZW5Qb3B1cEFkZCgpIHtcclxuICBwb3B1cEFkZC5vcGVuKCk7XHJcbiAgY2FyZEZvcm1WYWxpZGF0b3IuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdWJtaXRQb3B1cEFkZChkYXRhKSB7XHJcbiAgcG9wdXBBZGQucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICBhcGkuc2VuZENhcmQoZGF0YSlcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQocmVzKTtcclxuICAgICAgY2FyZENvbnRhaW5lci5wcmVwZW5kSXRlbShjYXJkKTtcclxuICAgICAgcG9wdXBBZGQuY2xvc2UoKTtcclxuICAgICAgY29uc29sZS5sb2codXNlci5nZXRJZCgpKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsCDQv9GA0Lgg0LTQvtCx0LDQstC70LXQvdC40Lgg0LrQsNGA0YLQvtGH0LrQuCR7ZXJyfWApO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgcG9wdXBBZGQucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICB9KVxyXG59XHJcblxyXG4vLyDRg9C00LDQu9C10L3QuNC1INC60LDRgNGC0L7Rh9C10LpcclxuZnVuY3Rpb24gc3VibWl0UG9wdXBEZWxldGUoY2FyZCkge1xyXG4gIGNvbnN0IGNhcmRJZCA9IGNhcmQuX2lkO1xyXG4gIGFwaS5kZWxldGVDYXJkKGNhcmRJZClcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgY2FyZC5kZWxldGVDYXJkKCk7XHJcbiAgICAgIHBvcHVwRGVsZXRlLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LAg0L/RgNC4INGD0LTQsNC70LXQvdC40Lgg0LrQsNGA0YLQvtGH0LrQuCR7ZXJyfWApO1xyXG4gICAgfSlcclxufVxyXG4vLyDQu9Cw0LnQulxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQWRkTGlrZShjYXJkKSB7XHJcbiAgY29uc3QgY2FyZElkID0gY2FyZC5faWQ7XHJcbiAgYXBpLmFkZExpa2UoY2FyZElkKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBjYXJkLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlX19jb3VudGVyJykudGV4dENvbnRlbnQgPSByZXMubGlrZXMubGVuZ3RoO1xyXG4gICAgICBjYXJkLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlJykuY2xhc3NMaXN0LmFkZCgnZWxlbWVudF9fbGlrZV9hY3RpdmUnKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgY29uc29sZS5sb2coYNCe0YjQuNCx0LrQsCDQv9GA0Lgg0LvQsNC50LrQtSDQutCw0YDRgtC+0YfQutC4JHtlcnJ9YCk7XHJcbiAgICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVMaWtlKGNhcmQpIHtcclxuICBjb25zdCBjYXJkSWQgPSBjYXJkLl9pZDtcclxuICBhcGkuZGVsZXRlTGlrZShjYXJkSWQpXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGNhcmQuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2VfX2NvdW50ZXInKS50ZXh0Q29udGVudCA9IHJlcy5saWtlcy5sZW5ndGg7XHJcbiAgICAgIGNhcmQuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UnKS5jbGFzc0xpc3QucmVtb3ZlKCdlbGVtZW50X19saWtlX2FjdGl2ZScpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhg0J7RiNC40LHQutCwINC/0YDQuCDRg9C00LDQu9C10L3QuNC4INC70LDQudC60LAg0LrQsNGA0YLQvtGH0LrQuCR7ZXJyfWApO1xyXG4gICAgfSlcclxufVxyXG5cclxuXHJcbi8vINC/0YDQvtGE0LjQu9GMIFxyXG5cclxuYXBpLmdldFByb2ZpbGVJbmZvKClcclxuICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coXCJVc2VyIGlkOlwiLCBkYXRhLl9pZCk7XHJcbiAgICB1c2VyTmV3ID0gbmV3IFVzZXJJbmZvKGRhdGEpO1xyXG4gICAgY29uc3QgdXNlckluZm8gPSB1c2VyTmV3LmdldFVzZXJJbmZvKCk7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fdGl0bGUnKS50ZXh0Q29udGVudCA9IHVzZXJJbmZvLm5hbWU7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyJykuYWx0ID0gdXNlckluZm8ubmFtZTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXInKS5zcmMgPSB1c2VySW5mby5hdmF0YXI7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fc3VidGl0bGUnKS50ZXh0Q29udGVudCA9IHVzZXJJbmZvLmFib3V0O1xyXG4gIH0pXHJcbiAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnIgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfSlcclxuICB9KVxyXG5cclxuZnVuY3Rpb24gb3BlblBvcHVwRWRpdCgpIHtcclxuICBjb25zdCB1c2VySW5mbyA9IHVzZXIuZ2V0VXNlckluZm8oKTtcclxuICBjb25zb2xlLmxvZyh1c2VySW5mbyk7XHJcbiAgY29uc29sZS5sb2cobmFtZUlucHV0KTtcclxuICBjb25zb2xlLmxvZyhqb2JJbnB1dCk7XHJcbiAgbmFtZUlucHV0LnZhbHVlID0gdXNlckluZm8ubmFtZTtcclxuICBqb2JJbnB1dC52YWx1ZSA9IHVzZXJJbmZvLmFib3V0O1xyXG4gIHBvcHVwRWRpdC5vcGVuKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN1Ym1pdFBvcHVwRWRpdChkYXRhKSB7XHJcbiAgcG9wdXBFZGl0LnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgdXNlci5zZXRVc2VySW5mbyhkYXRhKTtcclxuICBhcGkuc2VuZFByb2ZpbGVJbmZvKHVzZXIuZ2V0VXNlckluZm8oKSlcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgcG9wdXBFZGl0LmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LAg0L/RgNC4INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Lgg0L/RgNC+0YTQuNC70Y8ke2Vycn1gKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGVkaXRGb3JtVmFsaWRhdG9yLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuICAgICAgcG9wdXBFZGl0LnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gc3VibWl0UG9wdXBBdmF0YXIoZGF0YSkge1xyXG4gIHBvcHVwQXZhdGFyLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgdXNlci5zZXRVc2VyQXZhdGFyKGRhdGEpO1xyXG4gIGFwaS5zZW5kQXZhdGFyKGRhdGEpXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIHBvcHVwQXZhdGFyLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGDQntGI0LjQsdC60LAg0L/RgNC4INGA0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40Lgg0L/RgNC+0YTQuNC70Y8ke2Vycn1gKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHBvcHVwQXZhdGFyLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gb3BlblBvcHVwQXZhdGFyKCkge1xyXG4gIGNvbnN0IHVzZXJJbmZvID0gdXNlci5nZXRVc2VySW5mbygpO1xyXG4gIGxpbmtJbnB1dC52YWx1ZSA9IHVzZXJJbmZvLmF2YXRhcjtcclxuICBwb3B1cEF2YXRhci5vcGVuKCk7XHJcbiAgcHJvZmlsZU92ZXJsYXkuY2xhc3NMaXN0LmFkZCgncHJvZmlsZV9fYXZhdGFyX19vdmVybGF5X2Nsb3NlZCcpO1xyXG59XHJcblxyXG4vLyDRgdC70YPRiNCw0YLQtdC70LhcclxuYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIG9wZW5Qb3B1cEFkZCgpO1xyXG59KTtcclxuZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBvcGVuUG9wdXBFZGl0KCk7XHJcbn0pO1xyXG5wcm9maWxlQXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XHJcbiAgcHJvZmlsZU92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgncHJvZmlsZV9fYXZhdGFyX19vdmVybGF5X2Nsb3NlZCcpXHJcbn0pXHJcblxyXG5wcm9maWxlQXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XHJcbiAgcHJvZmlsZU92ZXJsYXkuY2xhc3NMaXN0LmFkZCgncHJvZmlsZV9fYXZhdGFyX19vdmVybGF5X2Nsb3NlZCcpXHJcbn0pXHJcblxyXG5wcm9maWxlT3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBvcGVuUG9wdXBBdmF0YXIoKTtcclxufSlcclxuXHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiZGF0YSIsInRlbXBsYXRlU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVPcGVuUG9wdXAiLCJ1c2VySWQiLCJoYW5kbGVBZGRMaWtlIiwiaGFuZGxlRGVsZXRlTGlrZSIsInRoaXMiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfaWQiLCJfb3duZXJJZCIsIm93bmVyIiwiX3VzZXJzTGlrZXMiLCJsaWtlcyIsIl91c2VySWQiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlT3BlblBvcHVwIiwiX2hhbmRsZUFkZExpa2UiLCJfaGFuZGxlRGVsZXRlTGlrZSIsImNvbnNvbGUiLCJsb2ciLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfY2FyZEltYWdlIiwiX2NhcmRMaWtlIiwiX2NhcmRCYXNrZXQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfcmVtb3ZlQ2FyZEJhc2tldCIsIl9jaGVja0xpa2UiLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInJlbW92ZSIsImZvckVhY2giLCJ1c2VyIiwiYWRkIiwiRm9ybVZhbGlkYXRvciIsImZvcm0iLCJpbnB1dCIsImVycm9yTWVzc2FnZSIsIl9mb3JtIiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9lcnJvckNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0cyIsIkFycmF5IiwiZnJvbSIsInNvbWUiLCJlbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsImJ1dHRvbiIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRzIiwiZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsImVuYWJsZVN1Ym1pdEJ1dHRvbiIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b24iLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfY2hlY2tJZklucHV0VmFsaWQiLCJfdG9nZ2xlQnV0dG9uRXJyb3IiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiX3NldElucHV0TGlzdGVuZXJzIiwiX2Zvcm1TZWxlY3RvciIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJpbnB1dEVsZW1lbnQiLCJfaGlkZUlucHV0RXJyb3IiLCJkaXNhYmxlZCIsIl9zaG93SW5wdXRFcnJvciIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImFwcGVuZCIsImlubmVySFRNTCIsIml0ZW1zIiwiY2xlYXIiLCJpdGVtIiwiY2FyZCIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5IiwidGFyZ2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJfaW1hZ2UiLCJfZGVzY3JpcHRpb24iLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2lucHV0TGlzdCIsIl9mb3JtVmFsdWVzIiwidmFsdWUiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsImlzTG9hZGluZyIsIlBvcHVwV2l0aENvbmZpcm0iLCJfY2FyZCIsIlVzZXJJbmZvIiwiYWJvdXQiLCJhdmF0YXIiLCJfYWJvdXQiLCJfYXZhdGFyIiwiX2RhdGFPYmplY3QiLCJlZGl0QnV0dG9uIiwiYWRkQnV0dG9uIiwiZm9ybUVkaXQiLCJmb3JtQWRkIiwiZm9ybUF2YXRhciIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwibGlua0lucHV0IiwicHJvZmlsZUF2YXRhciIsInByb2ZpbGVPdmVybGF5IiwidXNlckRlc2NyaXB0aW9uIiwiZWxlbWVudHNDb250YWluZXIiLCJ2YWxpZGF0aW9uQ29uZmlnIiwiQXBpIiwiYWRkcmVzcyIsInRva2VuIiwiX2FkZHJlc3MiLCJfdG9rZW4iLCJmZXRjaCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNhcmRJZCIsImVkaXRGb3JtVmFsaWRhdG9yIiwiY2FyZEZvcm1WYWxpZGF0b3IiLCJhdmF0YXJGb3JtVmFsaWRhdG9yIiwiZW5hYmxlVmFsaWRhdGlvbiIsInBvcHVwUGljdHVyZSIsInNldEV2ZW50TGlzdGVuZXJzIiwicG9wdXBFZGl0IiwicmVuZGVyTG9hZGluZyIsInNldFVzZXJJbmZvIiwiYXBpIiwic2VuZFByb2ZpbGVJbmZvIiwiZ2V0VXNlckluZm8iLCJjYXRjaCIsImVyciIsImZpbmFsbHkiLCJwb3B1cEFkZCIsInNlbmRDYXJkIiwiY3JlYXRlQ2FyZCIsImNhcmRDb250YWluZXIiLCJwcmVwZW5kSXRlbSIsImdldElkIiwicG9wdXBEZWxldGUiLCJkZWxldGVDYXJkIiwicG9wdXBBdmF0YXIiLCJzZXRVc2VyQXZhdGFyIiwic2VuZEF2YXRhciIsInVzZXJOZXciLCJwcm9taXNlUHJvZmlsZUluZm8iLCJnZXRQcm9maWxlSW5mbyIsInByb21pc2VDYXJkcyIsImdldENhcmRzIiwibGVuZ3RoIiwiYWRkSXRlbSIsIm9wZW4iLCJnZXRSZWFkeVRvRGVsZXRlIiwiZ2VuZXJhdGVDYXJkIiwiYWRkTGlrZSIsImRlbGV0ZUxpa2UiLCJhbGwiLCJ2YWx1ZXMiLCJyZW5kZXJJdGVtcyIsImNhcmRzIiwidXNlckluZm8iXSwic291cmNlUm9vdCI6IiJ9